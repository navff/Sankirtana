@page
@model Sankirtana.Web.Pages.Sales.AddSale

@{
    ViewBag.Title = "Распространение";
}
<h1>@ViewBag.Title</h1>
<br/>

<div>
    <form method="post">
        <div class="mb-3">
            <label for="Book" class="form-label">Книга</label>
            <select class="form-control" id="Book" name="BookId">
                @foreach (var book in Model.BookList)
                {
                    <option value="@book.Id">@book.Name</option>
                }
            </select>
        </div>
        
        <button type="submit" class="btn btn-lg btn-primary">Ушла!</button>
    </form>
    <br/>
    @if (@Model.Sales.Any())
    {
        <h2>Сегодня мной распространено:</h2>
        <table class="table">
            <thead>
            <tr>
                <th scope="col">Название</th>
                <th scope="col">Кол-во очков</th>
                <th scope="col">Действия</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var sale in Model.Sales)
            {
                <tr>
                    <td><a href="~/sales/editSale?id=@sale.Id">@sale.Book.Name</a></td>
                    <td>@sale.Book.VolumePoints</td>
                    <td>
                        <form method="post" action="~/sales/DeleteSale">
                            <input type="hidden" name="id" value="@sale.Id"/>
                            <input type="submit" class="btn btn-sm btn-danger" onclick="return OnDeleteClick()" value="Удалить"/>
                        </form>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }
    
</div>


<script>
    $(document).ready(function() {
        $('#Book').select2({
           width: '100%'
        });
    });
    
    function OnDeleteClick()
    {
      if (confirm("Удалить?")) {
        		return true;
        	} else {
        		return false;
        	}
    }
</script>
